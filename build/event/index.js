(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,o=window.wp.i18n,a=window.wp.blockEditor,n=window.wp.components,l=window.wp.data,r=window.wp.serverSideRender;var s=e.n(r);const c=JSON.parse('{"UU":"bazo/event-grid"}');(0,t.registerBlockType)(c.UU,{edit:function(e){const{attributes:t,setAttributes:r}=e,{postsToShow:c,selectedCategories:i,showLoadMoreButton:d,postType:m,taxonomy:p,showLoader:u,showAds:b,adPositions:g}=t,C=(0,a.useBlockProps)(),_=(0,l.useSelect)(e=>{const t=e("core").getPostTypes({per_page:-1});return t?t.filter(e=>!(!e.viewable||"attachment"===e.slug)).map(e=>({label:e.labels.singular_name,value:e.slug})):[]},[]),h=(0,l.useSelect)(e=>{if(!m)return[];const t=e("core").getPostType(m);return t&&t.taxonomies?t.taxonomies.map(t=>{const o=e("core").getTaxonomy(t);return o?{label:o.labels.singular_name,value:o.slug}:null}).filter(Boolean):[]},[m]),w=(0,l.useSelect)(e=>p&&e("core").getEntityRecords("taxonomy",p,{per_page:-1})||[],[p]),R=(e,t,o)=>{const a=[...g];a[e]={...a[e],[t]:o},r({adPositions:a})};return React.createElement(React.Fragment,null,React.createElement(a.InspectorControls,null,React.createElement(n.PanelBody,{title:(0,o.__)("Display Settings","bazo")},React.createElement(n.SelectControl,{label:(0,o.__)("Post Type","bazo"),value:m,options:_,onChange:e=>{r({postType:e,taxonomy:""})}}),h.length>0&&React.createElement(n.SelectControl,{label:(0,o.__)("Category Type","bazo"),value:p,options:h,onChange:e=>r({taxonomy:e,selectedCategories:[]})}),React.createElement(n.RangeControl,{label:(0,o.__)("Posts to show","bazo"),value:c,onChange:e=>r({postsToShow:e}),min:1,max:20}),React.createElement(n.ToggleControl,{label:(0,o.__)("Show Load More Button","bazo"),checked:d,onChange:()=>r({showLoadMoreButton:!d})}),React.createElement(n.ToggleControl,{label:(0,o.__)("Show Loader","bazo"),checked:u,onChange:()=>r({showLoader:!u})})),p&&React.createElement(n.PanelBody,{title:(0,o.__)("Filter by Category","bazo")},React.createElement(n.CheckboxControl,{label:(0,o.__)("All","bazo"),checked:0===i.length,onChange:e=>e&&r({selectedCategories:[]})}),w&&w.map(e=>React.createElement(n.CheckboxControl,{key:e.id,label:e.name,checked:i.includes(e.id),onChange:t=>((e,t)=>{r(t?{selectedCategories:[...i,e]}:{selectedCategories:i.filter(t=>t!==e)})})(e.id,t)}))),React.createElement(n.PanelBody,{title:(0,o.__)("Google Ad Settings","bazo"),initialOpen:!1},React.createElement(n.ToggleControl,{label:(0,o.__)("Show Ad Blocks","bazo"),checked:b,onChange:()=>r({showAds:!b})}),b&&React.createElement(React.Fragment,null,React.createElement("p",null,(0,o.__)("Configure ad positions in the event grid:","bazo")),g.map((e,t)=>React.createElement("div",{key:t,style:{border:"1px solid #ddd",padding:"12px",marginBottom:"12px",borderRadius:"4px"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"}},React.createElement("strong",null,(0,o.__)("Ad","bazo")," #",t+1),React.createElement(n.Button,{isDestructive:!0,isSmall:!0,onClick:()=>(e=>{const t=g.filter((t,o)=>o!==e);r({adPositions:t})})(t)},(0,o.__)("Remove","bazo"))),React.createElement(n.RangeControl,{label:(0,o.__)("Position (after post number)","bazo"),value:e.position,onChange:e=>R(t,"position",e),min:1,max:c}),React.createElement(n.SelectControl,{label:(0,o.__)("Span Columns","bazo"),value:e.span,options:[{label:"1 Column",value:1},{label:"2 Columns",value:2},{label:"3 Columns",value:3},{label:"4 Columns",value:4}],onChange:e=>R(t,"span",parseInt(e))}),React.createElement(n.TextControl,{label:(0,o.__)("Ad Text","bazo"),value:e.text,onChange:e=>R(t,"text",e)}))),React.createElement(n.Button,{isPrimary:!0,isSmall:!0,onClick:()=>{const e=[...g,{position:1,span:2,text:"AD Video"}];r({adPositions:e})},style:{width:"100%"}},(0,o.__)("Add Ad Position","bazo"))))),React.createElement("div",C,React.createElement(s(),{block:"bazo/event-grid",attributes:t})))}})})();