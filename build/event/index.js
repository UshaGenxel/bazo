(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,o=window.wp.i18n,a=window.wp.blockEditor,l=window.wp.components,n=window.wp.data,r=window.wp.serverSideRender;var c=e.n(r);const s=JSON.parse('{"UU":"bazo/event-grid"}');(0,t.registerBlockType)(s.UU,{edit:function(e){const{attributes:t,setAttributes:r}=e,{postsToShow:s,selectedCategories:i,showLoadMoreButton:d,postType:g,taxonomy:m,showLoader:b}=t,p=(0,a.useBlockProps)(),u=(0,n.useSelect)(e=>{const t=e("core").getPostTypes({per_page:-1});return t?t.filter(e=>!(!e.viewable||"attachment"===e.slug)).map(e=>({label:e.labels.singular_name,value:e.slug})):[]},[]),w=(0,n.useSelect)(e=>{if(!g)return[];const t=e("core").getPostType(g);return t&&t.taxonomies?t.taxonomies.map(t=>{const o=e("core").getTaxonomy(t);return o?{label:o.labels.singular_name,value:o.slug}:null}).filter(Boolean):[]},[g]),h=(0,n.useSelect)(e=>m&&e("core").getEntityRecords("taxonomy",m,{per_page:-1})||[],[m]);return React.createElement(React.Fragment,null,React.createElement(a.InspectorControls,null,React.createElement(l.PanelBody,{title:(0,o.__)("Display Settings","bazo")},React.createElement(l.SelectControl,{label:(0,o.__)("Post Type","bazo"),value:g,options:u,onChange:e=>{r({postType:e,taxonomy:""})}}),w.length>0&&React.createElement(l.SelectControl,{label:(0,o.__)("Category Type","bazo"),value:m,options:w,onChange:e=>r({taxonomy:e,selectedCategories:[]})}),React.createElement(l.RangeControl,{label:(0,o.__)("Posts to show","bazo"),value:s,onChange:e=>r({postsToShow:e}),min:1,max:20}),React.createElement(l.ToggleControl,{label:(0,o.__)("Show Load More Button","bazo"),checked:d,onChange:()=>r({showLoadMoreButton:!d})}),React.createElement(l.ToggleControl,{label:(0,o.__)("Show Loader","bazo"),checked:b,onChange:()=>r({showLoader:!b})})),m&&React.createElement(l.PanelBody,{title:(0,o.__)("Filter by Category","bazo")},React.createElement(l.CheckboxControl,{label:(0,o.__)("All","bazo"),checked:0===i.length,onChange:e=>e&&r({selectedCategories:[]})}),h&&h.map(e=>React.createElement(l.CheckboxControl,{key:e.id,label:e.name,checked:i.includes(e.id),onChange:t=>((e,t)=>{r(t?{selectedCategories:[...i,e]}:{selectedCategories:i.filter(t=>t!==e)})})(e.id,t)})))),React.createElement("div",p,b&&React.createElement("div",{className:"bazo-event-loader",style:{display:"flex"}},React.createElement("div",{className:"bazo-loader-gif"},React.createElement("img",{src:"/wp-content/themes/bazo/assets/images/loader.gif",alt:"Loading..."}))),React.createElement(c(),{block:"bazo/event-grid",attributes:t})))}})})();