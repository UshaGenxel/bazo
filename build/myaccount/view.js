document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("open-login-modal"),t=document.getElementById("open-my-account-modal-btn"),o=document.getElementById("auth-modal"),n=document.getElementById("forgot-password-modal"),a=document.getElementById("my-account-modal"),r=[o,n,a],d=document.getElementById("login-form-wrapper"),s=document.getElementById("signup-form-wrapper"),c=document.getElementById("show-signup"),l=document.getElementById("show-login"),m=document.getElementById("show-forgot-password"),i=document.getElementById("forgot-to-login"),u=document.getElementById("login-form"),g=document.getElementById("signup-form"),y=document.getElementById("forgot-password-form"),E=document.querySelector(".logout-btn"),h=document.getElementById("login-message"),f=document.getElementById("signup-message"),v=document.getElementById("forgot-password-message"),p=e=>{r.forEach(t=>{t!==e&&L(t)}),e.classList.remove("is-hidden"),e.classList.add("is-visible")},L=e=>{e.classList.remove("is-visible"),e.classList.add("is-hidden")},w=(e,t,o="error")=>{e.textContent=t,e.style.color="error"===o?"red":"green",e.style.padding="0.5rem",e.style.textAlign="center",e.style.borderRadius="0.5rem",e.style.marginBottom="1rem",e.style.backgroundColor="error"===o?"#fecaca":"#dcfce7"};e&&e.addEventListener("click",()=>p(o)),t&&t.addEventListener("click",()=>p(a)),document.querySelectorAll(".close-modal").forEach(e=>{e.addEventListener("click",e=>{const t=e.target.closest(".modal-container");t&&L(t)})}),c&&c.addEventListener("click",e=>{e.preventDefault(),d.classList.add("hidden"),s.classList.remove("hidden")}),l&&l.addEventListener("click",e=>{e.preventDefault(),s.classList.add("hidden"),d.classList.remove("hidden")}),m&&m.addEventListener("click",e=>{e.preventDefault(),L(o),setTimeout(()=>p(n),300)}),i&&i.addEventListener("click",e=>{e.preventDefault(),L(n),setTimeout(()=>p(o),300)}),document.querySelectorAll(".modal-container").forEach(e=>{e.addEventListener("click",t=>{t.target===e&&L(e)})}),u.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(u);fetch(bazo_myaccount_ajax.ajaxurl,{method:"POST",body:t}).then(e=>e.json()).then(e=>{e.success?(w(h,e.data.message,"success"),setTimeout(()=>{window.location.reload()},1e3)):w(h,e.data,"error")}).catch(e=>{w(h,"An error occurred. Please try again.","error")})}),g.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(g);t.get("user_password")===t.get("confirm_password")?fetch(bazo_myaccount_ajax.ajaxurl,{method:"POST",body:t}).then(e=>e.json()).then(e=>{e.success?(w(f,e.data.message,"success"),setTimeout(()=>{window.location.reload()},1e3)):w(f,e.data,"error")}).catch(e=>{w(f,"An error occurred. Please try again.","error")}):w(f,"Passwords do not match.","error")}),y.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(y);fetch(bazo_myaccount_ajax.ajaxurl,{method:"POST",body:t}).then(e=>e.json()).then(e=>{e.success?w(v,e.data.message,"success"):w(v,e.data,"error")}).catch(e=>{w(v,"An error occurred. Please try again.","error")})}),E&&E.addEventListener("click",e=>{e.preventDefault(),window.location.href=bazo_myaccount_ajax.logoutUrl})});